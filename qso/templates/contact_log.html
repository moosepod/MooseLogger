{% extends "base.html" %}

{% block page_title %}{{ contact_log.name }}{% endblock %}

{% block section_title %}{{ contact_log.name }}{% endblock %}

{% block head_extra %}
<script language="JavaScript">
$(document).ready(function() {
    $('#id_callsign').change(function() {
        callsign =  $('#id_callsign').val();
        if (callsign && callsign.length > 2) {
            $('#qrz_area').load('/callsign/lookup/' + document.forms.contact_form.callsign.value + '/');
        }
    });
});
</script>
{% endblock %}

{% block page_content %}
<div style="float: right">
<div id="qrz_area" style="width: 600; height=400"></div>
</div>

<form action="." method="POST" name="contact_form">
{% csrf_token %}
{{ form.as_p }}
<input type="submit"/>
</form>

{% if not contacts %}<p>You have not logged any entries yet.</p>{% else %}

<table>
 <tr>
  <th>Date</th>
  <th>Time</th>
  <th>DE</th>
  <th>Mode</th>
  <th>Frequency</th>
  <th>Band</th>
  <th>RST Sent</th>
  <th>RST Recv</th>
 </tr>
{% for contact in contacts %}
 <tr>
  <td>{{ contact.when|date:"m/d/Y" }}</td>
  <td>{{ contact.when|time:"H:i" }}Z</td>
  <td>{{ contact.callsign }}</td>
  <td>{{ contact.mode }}</td>
  <td>{{ contact.frequency }} MHz</td>
  <td>{{ contact.band }}</td>
  <td>{{ contact.rst_sent }}</td>
  <td>{{ contact.rst_received }}</td>
 </tr>
{% endfor %}
</table>
{% endif %}
{% endblock %}
