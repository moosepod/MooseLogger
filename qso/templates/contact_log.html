{% extends "base.html" %}

{% block page_title %}{{ contact_log.name }}{% endblock %}

{% block section_title %}{{ contact_log.name }}{% endblock %}

{% block head_extra %}
<script language="JavaScript">
$(document).ready(function() {
    $('#id_callsign').change(function() {
        callsign =  $('#id_callsign').val();
        if (callsign && callsign.length > 2) {
            $('#qrz_area').load('/callsign/lookup/' + document.forms.contact_form.callsign.value + '/');
        }
    });
});
</script>
<style type="text/css">
table.contact_table {
    border-left: 1px solid;
    border-top: 1px solid;
}

th.contact_table  {
    border-bottom: 1px solid;
    border-right: 1px solid;
    padding: 5px;
}

td.contact_table  {
    border-bottom: 1px solid;
    border-right: 1px solid;
    padding: 5px;
}

tr.odd {
    background: #CCCCCC;
}

</style>

{% endblock %}

{% block page_content %}
<div style="float: right">
<div id="qrz_area" style="width: 600; height=400"></div>
</div>

<form action="." method="POST" name="contact_form">
{% csrf_token %}

<table class="contact_table" cellspacing="0" cellpadding="0">
 <tr>
  <th class="contact_table">Date</th>
  <th class="contact_table">Time</th>
  <th class="contact_table">Callsign</th>
  <th class="contact_table">Mode</th>
  <th class="contact_table">Frequency</th>
  <th class="contact_table">Band</th>
  <th class="contact_table">RST Sent</th>
  <th class="contact_table">RST Recv</th>
  <th class="contact_table">Contest Sent</th>
  <th class="contact_table">Contest Recv</th>
  <th class="contact_table"></th>
 </tr>
{% if not contacts %}<tr><td colspan="10">You have not logged any entries yet.</td></tr>{% endif %}
<tr class="{% cycle 'odd' 'even' %}">
  <td class="contact_table" colspan="2">{{ form.when }}</td>
  <td class="contact_table">{{ form.callsign }}</td>
  <td class="contact_table">{{ form.mode }}</td>
  <td class="contact_table">{{ form.frequency }} MHz</td>
  <td class="contact_table">{{ form.band }}</td>
  <td class="contact_table">{{ form.rst_sent }}</td>
  <td class="contact_table">{{ form.rst_received }}</td>
  <td class="contact_table">{{ form.contest_exchange_sent }}</td>
  <td class="contact_table">{{ form.contest_exchange_received }}</td>
  <td class="contact_table"><input type="submit" value="Add"/></td>
 </tr>
{% for contact in contacts %}
 <tr class="{% cycle 'odd' 'even' %}">
  <td class="contact_table">{{ contact.when|date:"m/d/Y" }}</td>
  <td class="contact_table">{{ contact.when|time:"H:i" }}Z</td>
  <td class="contact_table">{{ contact.callsign|upper }}</td>
  <td class="contact_table">{{ contact.mode }}</td>
  <td class="contact_table">{{ contact.frequency }} MHz</td>
  <td class="contact_table">{{ contact.band }}</td>
  <td class="contact_table">{{ contact.rst_sent }}</td>
  <td class="contact_table">{{ contact.rst_received }}</td>
  <td class="contact_table">{{ contact.contest_exchange_sent }}</td>
  <td class="contact_table">{{ contact.contest_exchange_received }}</td>
  <td class="contact_table"></td>
 </tr>
{% endfor %}
</table>

</form>
{% endblock %}
